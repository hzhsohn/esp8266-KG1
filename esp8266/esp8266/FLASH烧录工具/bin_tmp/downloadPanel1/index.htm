<!doctype html>
<html>
<head>
<title>Index</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,minimal-ui"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="apple-mobile-web-app-capable" content="no"/>
<meta name="apple-touch-fullscreen" content="no"/>
<style type="text/css">
.b-gry {
margin-left:auto;
margin-right:auto;
max-width: 500px;
background: #EEE;
padding: 25px 15px 25px 10px;
color: #777;
text-shadow: 1px 1px 1px #FFF;
border:1px solid #E4E4E4;
font-family: Tahoma, Geneva, sans-serif;
font-size: 14px;
}
.b-gry h1 {
font-size: 25px;
padding: 0px 0px 10px 0px;
display: block;
border-bottom:1px solid #E4E4E4;
margin: -10px -15px 30px -10px;;
color: #777;
text-align:center;
}
.b-gry h1>span {
display: block;
font-size: 11px;
font-weight:100;
margin-top:10px;
}
.line {
display: block;
margin: 0px;
}
.line>span {
float: left;
width: 22%;
text-align: right;
padding-right: 10px;
margin-top: 12px;
color: #777;
font-size: 16px;
}
.inp_txt{
border: 1px solid #DADADA;
color: #777;
height: 30px;
margin-bottom: 16px;
margin-right: 6px;
margin-top: 2px;
outline: 0 none;
padding: 3px 3px 3px 5px;
font-size: 12px;
line-height:15px;
box-shadow: inset 0px 1px 4px #ECECEC;
-moz-box-shadow: inset 0px 1px 4px #ECECEC;
-webkit-box-shadow: inset 0px 1px 4px #ECECEC;
}
.w70{
	width:70%;
}
.w48{
	width:48%;
}
.button {
border: none;
padding: 10px 25px 10px 25px;
color: #FFF;
box-shadow: 1px 1px 5px #B6B6B6;
border-radius: 3px;
text-shadow: 1px 1px 1px #9E3F3F;
cursor: pointer;
width:50%;
font-size:20px;
margin:30px 0px 10px 0px;
-webkit-appearance: none;
background-color: #E06969;
}
.button:hover {
background: #CF7A7A
}
.txt_btn {
border: none;
color: #FFF;
box-shadow: 1px 1px 5px #666;
border-radius: 3px;
text-shadow: 1px 1px 1px #999;
cursor: pointer;
width:20%;
font-size:14px;
-webkit-appearance: none;
padding-top: 9px;
padding-right: 6px;
padding-bottom: 9px;
padding-left: 6px;
background-color: #444;
text-decoration: none;
}
.b-gry .txt_btn:hover {background-color: #569CD6;}
h3{text-align:center;}
.container{position:relative;width:100%;min-height:100%;}
.body{padding-bottom:50px;}
.footer{
position:fixed;
bottom:0px;
left:0px;
right: 0px;
padding: 10px 20px;
border-top: 1px solid #E7EAEC;
background: #EEE none repeat scroll 0px 0px;
color: #888;
font-weight: bold;
text-align: center;	
}
.container #ssidlist ul li {
font-size: 18px;
text-decoration: none;
text-align: center;
width: 85%;
border-bottom-width: 1px;
border-bottom-style: inset;
border-bottom-color: #999;
padding: 16px;
list-style-type: none;
}
.container #ssidlist ul li a {
color: #333;
text-decoration: none;
}
.tt{
font-size:14px;
padding: 10px 24px;}
.container #ssidlist ul {
margin-bottom: 50px;
}
h3>span {
display: block;
font-size: 11px;
font-weight:100;
margin-top:10px;
}
</style>
</head>
<script type="text/javascript">
<!-- 
function $(d)
{return document.getElementById(d);}
function validate_form(){
var ssid=document.form1.ssid.value;
var dev_id=document.form1.dev_id.value;
var mqtt_host=document.form1.mqtt_host.value;
if(ssid==""){
alert("ssid不能为空");
return false;
}
if(dev_id==""){
alert("设备编号不能为空");
return false;
}
if(mqtt_host==""){
alert("域名或IP不能为空");
return false;
}
if(""==document.form1.mqtt_publish.value)
{ document.form1.mqtt_publish.value="_"+dev_id;}
if(""==document.form1.mqtt_subscr.value)
{document.form1.mqtt_subscr.value=dev_id;}
document.form1.submit();
}
var isSSIDShow=0;
function ssidShowHidden(){
if(0==isSSIDShow)
{ ssidShow(); }
else
{ ssidHidden(); }
}
function ssidHidden(){
isSSIDShow=0;
$("ssidlist").style.display="none";
}
function ssidShow(){
isSSIDShow=1;
$("ssidlist").style.display="";
}
function GetQueryString(name)
{
var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
var r = window.location.search.substr(1).match(reg);
if(r!=null)return unescape(r[2]); return null;
}
function ln(ssid_name)
{
$("ssid").value=ssid_name;
ssidHidden();
}
function randomString(r)
{
r=r||32;
var t="123456789",a=t.length,e="";
for(i=0;r>i;i++)e+=t.charAt(Math.floor(Math.random()*a));
return e;
}
function defaultString()
{
return "192.168.100.1";
}
function defaultWifiPasswd()
{
return "12345678";
}
function showAdv()
{
$('typediv1').style.display='block';
$('typediv2').style.display='none';
}
</script>
<body>
<div class="container">
<div class="body">
<div class="b-gry">
<form name="form1" action="save.htm" method="get">
<h1>韩讯联控科技
<span>版本: mqtt_v1.0</span>
</h1>
<div class="line">
<h3>WIFI连接</h3>
<span>SSID :</span>
<input id="ssid" type=text name="ssid" class="inp_txt w48" placeholder='输入WIFI名称'/>
<input type="button" class="txt_btn" value="选  择" onClick="ssidShowHidden()"/>
</div>
<div id="ssidlist" style="display:none"><ul id=ssidShow></ul></div>
<div class="line">
<span>密码 :</span>
<input id="wifipwd" type=text name="wifipwd" class="inp_txt w48" placeholder='输入WIFI密码'/>
<input type="button" class="txt_btn"  value="默  认" onClick="javascript:wifipwd.value=defaultWifiPasswd()">
</div>
<h3>联网数据交互
<span>通讯标准 MQTT-HXK v1.0</span></h3>
<div class=line >
<span>设备编号 :</span>
<input name="dev_id" type=text class="inp_txt w48" id="dev_id" value=""  placeholder='输入设备控制标识'/>
<input type="button" class="txt_btn"  value="随 机" onClick="javascript:dev_id.value=randomString(4)">
</div>
<div class=line >
<span>域名或IP :</span>
<input name="mqtt_host" type=text class="inp_txt w48 " id="mqtt_host" placeholder='输入连接地址'/>
<input type="button" class="txt_btn"  value="默  认" onClick="javascript:mqtt_host.value=defaultString()">
</div>
<div class="line">
<span>端口 :</span>
<input name="mqtt_port" type=text class="inp_txt w70" id="mqtt_port" value="1883" placeholder='输入连接端口'/>
</div>
<div id=typediv1 style="display: none;">
<div class=line >
<span>客户端ID :</span>
<input name="mqtt_client_id" type=text class="inp_txt w70" id="mqtt_client_id" placeholder='输入客户端ID'/>
</div>
<div class=line >
<span>用户名 :</span>
<input name="mqtt_user" type=text class="inp_txt w70" id="mqtt_user" placeholder='输入mqtt用户名'/>
</div>
<div class=line >
<span>密码 :</span>
<input name="mqtt_passwd" type=text class=inp_txt id="mqtt_passwd" placeholder='输入mqtt密码'/>
</div>
</div>
<div id=typediv2 align=center>
<p>
<a href="javascript:showAdv()" style="padding:100px">高级内容</a>
</p>
</div><br/>
<div class=line align=center>
<input type=button class="button" value="保存&重启" onClick="validate_form()"/>
<input type=hidden name="mqtt_publish" id="mqtt_publish">
<input type=hidden name="mqtt_subscr" id="mqtt_subscr">
<input type=hidden name="ckd" id="ckd" value="{ckd}">
</div>     
</form>
</div>   
</div>
<div class="footer">     
<div>
<center>
<strong>Copyright@2016 Hx-kong.com</strong>
</center>
</div>
</div>
</div>
</body>
<script type="text/javascript">
<!--
function onload() 
{
form1.ssid.value=GetQueryString("ssid");
ssidHidden();
var arr=new Array({li});
var str="";
for(var j = 0; j <arr.length; j++) {
a=arr[j];
c=b=a;
if(a.indexOf("*]")==0)b=a.replace("*]","🔒 ");
if(a.indexOf("*]")==0)c=a.replace("*]","");
str+="<li><a href=# onClick=\"ln('"+c+"')\">"+b+"</a></li>";
}
document.getElementById("ssidShow").innerHTML=str;
}
window.onload=onload();
-->
</script>
</html>